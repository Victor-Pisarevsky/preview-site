<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Technical Audit - Payment Checkout | DIVO</title>

    <!-- Подключаем Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Шрифты из кастомного файла -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Alumni+Sans:wght@600;700;800;900&family=KS+Bistra:wght@700;800;900&family=Inter:wght@300;400;700&display=swap"
          rel="stylesheet">

    <!-- Стили из кастомного файла (переменные, шрифты, стили кнопок и т.д.) -->
    <style>
        /* Шрифты (из примера) */
        @font-face {
            font-family: 'Eugusto';
            src: url('/fonts/eugusto-regular.woff2') format('woff2'); 
            font-weight: 800;
            font-style: normal;
        }

        :root {
            --font-sans: 'Inter', sans-serif;
            --font-heading: 'Alumni Sans', sans-serif;
            --font-decorative: 'Eugusto', 'KS Bistra', sans-serif;
            --color-primary: rgb(203, 2, 19);
            --color-primary-dark: rgb(180, 2, 19);
            --color-bg-light: rgb(241, 241, 241);
            --color-text-main: rgb(30, 30, 30);
            --color-text-secondary: rgb(60, 60, 60);
            --color-card-bg: #ffffff;
            --color-footer-bg: rgb(30, 30, 30);
            --color-bg-1: rgba(203, 2, 19, 0.1);
            --color-bg-2: rgba(0, 240, 255, 0.1);
            --color-bg-3: rgba(60, 60, 60, 0.08);
        }

        /* Базовые стили */
        body {
            font-family: var(--font-sans);
            background-color: var(--color-bg-light);
            color: var(--color-text-main);
            font-weight: 300; 
            line-height: 1.6;
            overflow-x: hidden; /* Предотвращаем горизонтальный скролл */
        }

        /* Заголовки */
        h1[data-lang], h2[data-lang], h3[data-lang], h4[data-lang], h5[data-lang], h6[data-lang],
        h1, h2, h3, h4, h5, h6 {
            font-family: var(--font-heading);
            font-weight: 700;
            color: var(--color-text-main);
            line-height: 1.2;
            margin-bottom: 1rem;
        }
        h1[data-lang], h1 {
            font-family: var(--font-decorative);
            font-weight: 800;
            font-size: clamp(3.5rem, 3rem + 2vw, 5rem);
            letter-spacing: -1px;
        }
        h2[data-lang], h2 {
            font-size: clamp(2.5rem, 2rem + 1.5vw, 3.5rem);
            font-weight: 800;
        }
        h3[data-lang], h3 {
            font-size: clamp(1.75rem, 1.5rem + 1vw, 2.5rem);
            font-weight: 700;
        }
        h4[data-lang], h4 {
            font-size: clamp(1.25rem, 1.1rem + 0.5vw, 1.75rem);
            font-weight: 700;
        }
        p, blockquote {
            color: var(--color-text-secondary);
            margin-bottom: 1.25rem;
            font-size: 1.1rem;
            font-weight: 400;
        }
        
        /* Стили Шапки */
        .header-logo {
            font-family: var(--font-decorative);
            font-weight: 800;
            color: var(--color-primary);
            font-size: 2.25rem;
            line-height: 1;
        }
        .header-nav-link {
            font-family: var(--font-heading);
            font-weight: 600;
            font-size: 1.1rem;
            color: var(--color-text-secondary);
            transition: color 0.2s ease;
            text-transform: uppercase;
        }
        .header-nav-link:hover {
            color: var(--color-primary);
        }
        #mobile-menu {
            transition: all 0.3s ease-out;
            z-index: 40;
        }

        /* Стили кнопок */
        .btn {
            display: inline-block;
            padding: 0.75rem 1.75rem;
            border-radius: 8px;
            font-family: var(--font-heading);
            font-weight: 600;
            font-size: 1.1rem;
            text-decoration: none;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            cursor: pointer;
            transition: all 0.3s ease;
            margin: 0.25rem;
            white-space: nowrap;
        }
        .btn-primary {
            background-color: var(--color-primary);
            color: white;
            border: 2px solid var(--color-primary);
        }
        .btn-primary:hover {
            background-color: var(--color-primary-dark);
            border-color: var(--color-primary-dark);
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(203, 2, 19, 0.3);
        }
        .btn-secondary {
            background-color: transparent;
            color: var(--color-primary);
            border: 2px solid var(--color-primary);
        }
        .btn-secondary:hover {
            background-color: var(--color-primary);
            color: white;
            transform: translateY(-2px);
        }
        .btn-lg {
            padding: 1rem 2.25rem;
            font-size: 1.25rem;
        }
        
        /* Карточки */
        .card {
            background-color: var(--color-card-bg);
            border-radius: 12px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.05);
            border: 1px solid rgba(0, 0, 0, 0.08);
            padding: 1.5rem;
            transition: all 0.3s ease;
            height: 100%;
        }
        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        }
        
        /* Переключатель языка */
        .lang-switcher-inline {
            background-color: rgba(0,0,0,0.05);
            border-radius: 8px;
            padding: 0.25rem;
            display: flex;
        }
        .lang-switcher-inline button {
            padding: 0.5rem 0.75rem;
            font-family: var(--font-heading);
            font-weight: 600;
            color: var(--color-text-secondary);
            background-color: transparent;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        .lang-switcher-inline button.active {
            color: var(--color-primary);
            background-color: var(--color-card-bg);
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
        }
        .lang-switcher-inline button:hover:not(.active) {
            background-color: rgba(0,0,0,0.03);
        }

        /* Стили для инпутов формы */
        .form-input,
        .form-select {
            width: 100%;
            padding: 0.75rem 1rem;
            background: #f9fafb; /* bg-gray-50 */
            border: 1px solid #d1d5db; /* border-gray-300 */
            border-radius: 8px;
            color: var(--color-text-main);
            font-size: 1rem;
            font-family: var(--font-sans);
            transition: all 0.3s ease;
        }
        .form-input:focus,
        .form-select:focus {
            outline: none;
            border-color: var(--color-primary);
            box-shadow: 0 0 0 2px rgba(203, 2, 19, 0.2);
        }
        .form-select {
            cursor: pointer;
            appearance: none;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 24 24' fill='none' stroke='%231e1e1e' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E");
            background-repeat: no-repeat;
            background-position: right 1rem center;
            padding-right: 2.5rem;
        }
        .checkbox-input {
            width: 1.25rem;
            height: 1.25rem;
            cursor: pointer;
            border-radius: 4px;
            color: var(--color-primary);
            border-color: #d1d5db; /* border-gray-300 */
        }
        .checkbox-input:focus {
            outline: none;
            box-shadow: 0 0 0 2px rgba(203, 2, 19, 0.2);
        }

        /* Сообщения об ошибках/успехе */
        .message {
            padding: 1rem;
            border-radius: 8px;
            margin-bottom: 1rem;
            font-size: 1rem;
            display: none;
        }
        .message.show {
            display: block;
            animation: slideDown 0.3s ease;
        }
        .message.success {
            background: rgba(0, 170, 255, 0.1);
            border: 1px solid #00AAFF;
            color: #007acc;
        }
        .message.error {
            background: rgba(203, 2, 19, 0.1);
            border: 1px solid var(--color-primary);
            color: var(--color-primary-dark);
        }
        @keyframes slideDown {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Подвал */
        .footer {
            background-color: var(--color-footer-bg);
            color: #CFCFCF; 
            display: block;
        }
        .footer-logo {
            font-family: var(--font-decorative);
            font-weight: 800;
            color: white;
            font-size: 2.5rem;
            line-height: 1;
            margin-bottom: 1rem;
        }
        .footer-title {
            font-family: var(--font-heading);
            font-weight: 700;
            color: white;
            font-size: 1.25rem;
            margin-bottom: 1rem;
            text-transform: uppercase;
        }
        p[data-lang="footer-mission"] {
            color: white;
        }
        .footer-link {
            color: #CFCFCF;
            font-family: var(--font-sans);
            font-weight: 400; 
            font-size: 1rem;
            text-decoration: none;
            transition: color 0.2s ease;
        }
        .footer-link:hover {
            color: white;
        }
         /* 1. Настройки контейнера-скроллера */
    .widget-scroller {
        width: 100%;            /* Занимает всю доступную ширину на экране */
        overflow-x: auto;       /* Включает горизонтальный скролл, если контент шире */
        -webkit-overflow-scrolling: touch; /* Плавная инерционная прокрутка на iPhone/Android */
        padding-bottom: 10px;   /* Небольшой отступ снизу для эстетики скроллбара */

        /* Центрирование скроллера, если экран широкий (опционально) */
        display: flex;
        justify-content: center;
        /* Важно: для работы скролла внутри flex-контейнера на узких экранах */
        justify-content: flex-start;
    }

    /* Медиа-запрос: центрируем только если экран шире виджета */
    @media (min-width: 780px) {
        .widget-scroller {
            justify-content: center;
        }
    }

    /* 2. Жесткая фиксация iframe */
    .fixed-iframe {
        /* !important нужен, чтобы перебить стили Tailwind/Bootstrap,
           которые пытаются сделать max-width: 100% */
        min-width: 780px !important;
        width: 780px !important;

        /* Убираем лишние отступы */
        display: block;

        /* Фикс для белого экрана (иногда помогает при рендеринге) */
        background-color: transparent;
    }
    </style>
</head>
<body class="antialiased">

<!-- Шапка (Header) из кастом.html -->
<header class="sticky top-0 w-full bg-white/95 backdrop-blur-sm shadow-sm z-50">
    <div class="container max-w-7xl mx-auto px-4">
        <div class="flex justify-between items-center h-20">

            <a href="/" class="header-logo flex-shrink-0" data-lang="logo">DIVO</a>

            <div class="hidden lg:flex items-center gap-6">
                <nav class="flex gap-8 items-center">
                    <div class="relative group">
                        <button class="header-nav-link flex items-center gap-1" data-lang="nav-solutions"
                                aria-expanded="false" aria-controls="solutions-dropdown">
                            Решения
                            <svg class="w-4 h-4 transition-transform group-hover:rotate-180" fill="none"
                                 stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                      d="M19 9l-7 7-7-7"></path>
                            </svg>
                        </button>
                        <div id="solutions-dropdown"
                             class="absolute left-0 mt-2 w-64 bg-white rounded-lg shadow-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 z-50">
                            <div class="py-2">
                                <a href="/for-sales" class="block px-4 py-2 hover:bg-gray-50" data-lang="nav-sales">Для
                                    Продаж</a>
                                <a href="/for-design" class="block px-4 py-2 hover:bg-gray-50" data-lang="nav-design">Для
                                    Дизайна</a>
                                <a href="/custom-development" class="block px-4 py-2 hover:bg-gray-50"
                                   data-lang="nav-custom-dev">Кастомная разработка</a>
                            </div>
                        </div>
                    </div>
                    <a href="/custom-development" class="header-nav-link" data-lang="nav-portfolio">Портфолио</a>
                    <a href="/about-us" class="header-nav-link" data-lang="nav-about">О нас</a>
                </nav>

                <div class="flex items-center gap-4">
                    <!-- Кнопка CTA на странице оплаты не нужна, но переключатель языка оставляем -->
                    <!-- <a href="#" class="btn btn-primary btn-sm popup-trigger" data-popup="consult" data-lang="header-cta">Получить консультацию</a> -->

                    <!-- Новый переключатель языка -->
                    <div class="lang-switcher-inline">
                        <button id="btn-ru" class="" aria-pressed="false">RU</button>
                        <button id="btn-en" class="active" aria-pressed="true">EN</button>
                    </div>
                </div>
            </div>

            <div class="lg:hidden flex items-center gap-2">
                <!-- <a href="#" class="btn btn-primary text-xs px-3 py-2 whitespace-nowrap popup-trigger" data-popup="consult" data-lang="header-cta-mobile">Консультация</a> -->
                <div class="lang-switcher-inline">
                    <button id="btn-ru-mobile" class="text-xs px-2 py-1" aria-pressed="false">RU</button>
                    <button id="btn-en-mobile" class="active text-xs px-2 py-1" aria-pressed="true">EN</button>
                </div>
                <button id="mobile-menu-toggle" class="text-gray-800 focus:outline-none" aria-expanded="false"
                        aria-controls="mobile-menu">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                              d="M4 6h16M4 12h16M4 18h16"></path>
                    </svg>
                </button>
            </div>
        </div>

        <div id="mobile-menu" class="hidden lg:hidden pb-4">
            <nav class="flex flex-col gap-4">
                <div>
                    <div class="font-semibold text-gray-800 mb-2" data-lang="nav-solutions">Решения</div>
                    <div class="pl-4 flex flex-col gap-2">
                        <a href="/for-sales" class="header-nav-link" data-lang="nav-sales">Для Продаж</a>
                        <a href="/for-design" class="header-nav-link" data-lang="nav-design">Для Дизайна</a>
                        <a href="/custom-development" class="header-nav-link" data-lang="nav-custom-dev">Кастомная
                            разработка</a>
                    </div>
                </div>
                <a href="/custom-development" class="header-nav-link" data-lang="nav-portfolio">Портфолио</a>
                <a href="/about-us" class="header-nav-link" data-lang="nav-about">О нас</a>
            </nav>
        </div>
    </div>
</header>

<!-- Кнопка "Назад" (перестилизована) -->
<div class="container max-w-7xl mx-auto px-4 pt-6">
    <button class="btn btn-secondary" id="backBtn" style="padding: 0.625rem 1.25rem; font-size: 0.9375rem;">
        <span data-lang-key="back_button">← Back to Services</span>
    </button>
</div>

<!-- Основной контент (из index.html, перестилизован с Tailwind) -->
<div class="container max-w-7xl mx-auto px-4 pt-12 sm:pt-16 pb-16">

    <div class="grid grid-cols-1 lg:grid-cols-2 gap-12 items-start">
        <!-- Левая колонка: Инфо о продукте -->
        <div class="product-info">
            <h1 class="text-4xl md:text-5xl font-heading font-bold mb-4" data-lang-key="product_name">Technical
                Audit</h1>
            <div class="text-3xl font-heading font-bold text-primary mb-6" data-lang-key="product_price">$1,999 USD
            </div>
            <p class="text-lg text-text-secondary mb-10" data-lang-key="product_description">
                Comprehensive technical assessment and strategic recommendations for your infrastructure
            </p>

            <div class="mb-10">
                <h2 class="text-2xl font-heading font-bold mb-6" data-lang-key="whats_included">What's Included</h2>
                <ul class="space-y-4" id="featuresList">
                    <!-- Features will be rendered here -->
                </ul>
            </div>

            <div class="mb-10">
                <h2 class="text-2xl font-heading font-bold mb-6" data-lang-key="timeline_title">Timeline &amp;
                    Process</h2>
                <div class="space-y-4" id="timeline">
                    <!-- Timeline will be rendered here -->
                </div>
            </div>

            <div class="flex flex-wrap gap-x-6 gap-y-2 mt-8 pt-6 border-t border-gray-200">
                <a href="/terms-of-service" class="text-sm text-text-secondary hover:text-primary transition"
                   data-lang-key="tos_link">Terms
                    of Service →</a>
                <a href="/privacy-policy" class="text-sm text-text-secondary hover:text-primary transition"
                   data-lang-key="privacy_link">Privacy Policy →</a>
                <a href="/user-agreements" class="text-sm text-text-secondary hover:text-primary transition"
                   data-lang-key="return_link">Return Policy →</a>
            </div>
        </div>

        <!-- Правая колонка: Виджет оплаты -->
        <div class="payment-widget lg:sticky top-28 bg-white rounded-lg border border-gray-200 shadow-lg p-6 md:p-8">

            <div class="widget-content">
                <div style="display: flex; justify-content: center; width: 100%;">
                    <iframe src="https://nowpayments.io/embeds/payment-widget?iid=6079019684" width="100%"
                            height="696"
                            frameborder="0"
                            scrolling="no"
                            style="overflow-y: hidden; max-width: 410px; min-width: 320px;">
                        Can't load widget
                    </iframe>
                </div>

                <p class="text-sm text-center !text-text-secondary mt-4 mb-0">

                          <span data-lang="form_note_p1">
                            By clicking the button, you agree to the
                          </span>

                    <a href="/privacy-policy"
                       data-lang="form_note_privacy_policy"
                       class="!text-blue-600 !underline hover:!text-blue-800">
                        Privacy Policy
                    </a>

                    <span data-lang="form_note_p2">
                            and
                          </span>

                    <a href="/terms-of-service"
                       data-lang="form_note_terms_of_service"
                       class="!text-blue-600 !underline hover:!text-blue-800">
                        Terms of Service
                    </a>

                    <span data-lang="form_note_p3">
                            and
                          </span>

                    <a href="/user-agreement"
                       data-lang="form_note_user_agreement"
                       class="!text-blue-600 !underline hover:!text-blue-800">
                        User Agreement
                    </a>

                </p>

                <div class="mt-6 pt-6 border-t border-gray-200 text-center">
                    <div class="font-bold text-text-main" data-lang-key="secure_payment"> Secure payment</div>
                    <div class="text-sm text-text-secondary mt-1" data-lang-key="trust_message">Your payment data is
                        encrypted and secure
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Подвал (Footer) из кастом.html -->
<footer class="footer pt-16 pb-8 md:pb-12">
    <div class="container max-w-7xl mx-auto px-4">
        <div class="grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-4 xl:gap-6">

            <div>
                <a href="/" class="footer-logo" data-lang="logo">DIVO</a>
                <p class="text-sm mb-2" data-lang="footer-mission">Ликвидируем разрыв между красивыми AI-демо и
                    работающими enterprise-системами, которые приносят измеримую прибыль.</p>
            </div>

            <div>
                <h4 class="footer-title" data-lang="footer-solutions-title">Решения</h4>
                <ul class="space-y-2">
                    <li><a href="/for-sales" class="footer-link" data-lang="nav-sales">Для Продаж</a></li>
                    <li><a href="/for-design" class="footer-link" data-lang="nav-design">Для Дизайна</a></li>
                    <li><a href="/custom-development" class="footer-link" data-lang="nav-custom-dev">Кастомная
                        разработка</a></li>
                </ul>
            </div>

            <div>
                <h4 class="footer-title" data-lang="footer-company-title">Компания</h4>
                <ul class="space-y-2">
                    <li><a href="/about-us" class="footer-link" data-lang="nav-about">О нас</a></li>
                    <li><a href="/custom-development" class="footer-link" data-lang="footer-portfolio">Портфолио и
                        Кейсы</a></li>
                </ul>
            </div>

            <div>
                <h4 class="footer-title" data-lang="footer-contact-title">Контакты</h4>
                <ul class="space-y-2">
                    <li><a href="mailto:info@divo.solutions" class="footer-link">info@divo.solutions</a></li>
                    <li><a href="https://wa.me/79035176391" target="_blank" class="footer-link">WhatsApp: +7 903 517
                        6391</a></li>
                    <li><a href="https://t.me/darikamouse" target="_blank" class="footer-link">Telegram:
                        @darikamouse</a></li>
                </ul>
                <div class="mt-3">
                    <h5 class="text-sm font-semibold text-gray-300 mb-2" data-lang="footer-legal-title">Документы</h5>
                    <ul class="space-y-2">
                        <li><a href="/privacy-policy" class="footer-link text-sm" data-lang="footer-privacy">Политика
                            конфиденциальности</a></li>
                        <li><a href="/user-agreement" class="footer-link text-sm" data-lang="footer-user-agreement">Пользовательское
                            соглашение</a></li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="border-t border-gray-700 mt-4 pt-3 text-center text-sm">
            <p class="text-gray-300">© 2025 DIVO. All rights reserved.</p>
        </div>
    </div>
</footer>

<!-- Объединенный JavaScript -->
<script>
    // Data structure with bilingual content (из index.html)
    const data = {
        product: {
            en: {
                name: "Technical Audit",
                price: "$1,999 USD",
                description: "Comprehensive technical assessment and strategic recommendations for your infrastructure"
            },
            ru: {
                name: "Технический аудит",
                price: "$1,999 USD",
                description: "Комплексная техническая оценка и стратегические рекомендации для вашей инфраструктуры"
            }
        },
        features: [
            {
                en: "Deep Analysis of your technical infrastructure and processes",
                ru: "Глубокий анализ вашей технической инфраструктуры и процессов"
            },
            {
                en: "Comprehensive Technical Specification Document (ТЗ)",
                ru: "Полный документ технической спецификации (ТЗ)"
            },
            {
                en: "Implementation Strategy & Roadmap",
                ru: "Стратегия реализации и дорожная карта"
            },
            {
                en: "15% Discount on Full Implementation",
                ru: "Скидка 15% на полную реализацию решения"
            }
        ],
        timeline: [
            {
                en: { period: "Days 0-3", title: "Consultation & Requirements" },
                ru: { period: "Дни 0-3", title: "Консультация и сбор требований" }
            },
            {
                en: { period: "Days 4-10", title: "System Analysis" },
                ru: { period: "Дни 4-10", title: "Анализ систем" }
            },
            {
                en: { period: "Days 11-13", title: "Solution Development" },
                ru: { period: "Дни 11-13", title: "Разработка решения" }
            },
            {
                en: { period: "Day 14", title: "Final Delivery" },
                ru: { period: "День 14", title: "Финальная доставка" }
            }
        ],
        translations: {
            en: {
                back_button: "← Back to Services",
                nav_solutions: "Solutions",
                nav_about: "About",
                nav_portfolio: "Portfolio",
                product_name: "Technical Audit",
                product_price: "$1,999 USD",
                product_description: "Comprehensive technical assessment and strategic recommendations for your infrastructure",
                whats_included: "What's Included",
                timeline_title: "Timeline & Process",
                order_summary: "Order Summary",
                total_label: "Total",
                select_method: "Select Payment Method",
                email_label: "Email Address",
                name_label: "Full Name",
                organization_label: "Organization (Optional)",
                agree_tos: "I agree with",
                agree_privacy: "I have read",
                button_text: "Proceed to Payment",
                secure_payment: " Secure payment",
                trust_message: "Your payment data is encrypted and secure",
                tos_link: "Terms of Service →",
                privacy_link: "Privacy Policy →",
                return_link: "Return Policy →",
                tos_link_short: "Terms of Service",
                privacy_link_short: "Privacy Policy",
                success_message: "Form submitted successfully! Redirecting to payment...",
                error_message: "Please fill in all required fields and accept the terms.",
                form_note_p1: "By clicking the button, you agree to the ",
                form_note_p2: " and ",
                form_note_p3: " and ",
                form_note_privacy_policy: "Privacy Policy",
                form_note_terms_of_service: "Terms of Service",
                form_note_user_agreement: "User Agreement",

                // Футер ключи (для полноты)
                logo: 'DIVO',
                'footer-mission': 'We bridge the gap between impressive AI demos and production-ready enterprise systems that deliver measurable profit.',
                'footer-solutions-title': 'Solutions',
                'footer-company-title': 'Company',
                'footer-portfolio': 'Portfolio & Cases',
                'footer-contact-title': 'Contact & Legal',
                'footer-legal-title': 'Legal',
                'footer-privacy': 'Privacy Policy',
                'footer-user-agreement': 'User Agreement',
                'nav-sales': 'For Sales',
                'nav-design': 'For Design',
                'nav-custom-dev': 'Custom Development',
            },
            ru: {
                back_button: "← Вернуться к услугам",
                nav_solutions: "Решения",
                nav_about: "О нас",
                nav_portfolio: "Портфолио",
                product_name: "Технический аудит",
                product_price: "$1,999 USD",
                product_description: "Комплексная техническая оценка и стратегические рекомендации для вашей инфраструктуры",
                whats_included: "Что входит в услугу",
                timeline_title: "График и процесс",
                order_summary: "Сводка заказа",
                total_label: "Итого",
                select_method: "Выберите способ оплаты",
                email_label: "Адрес электронной почты",
                name_label: "Полное имя",
                organization_label: "Организация (опционально)",
                agree_tos: "Я согласен с",
                agree_privacy: "Я прочитал",
                button_text: "Перейти к оплате",
                secure_payment: " Безопасная оплата",
                trust_message: "Ваши платежные данные зашифрованы и защищены",
                tos_link: "Условия обслуживания →",
                privacy_link: "Политика конфиденциальности →",
                return_link: "Политика возврата →",
                tos_link_short: "Условиями обслуживания",
                privacy_link_short: "Политику конфиденциальности",
                success_message: "Форма успешно отправлена! Перенаправление на оплату...",
                error_message: "Пожалуйста, заполните все обязательные поля и примите условия.",
                form_note_p1: "Нажимая на эту кнопку вы соглашаетесь с ",
                form_note_p2: " и ",
                form_note_p3: " и ",
                form_note_privacy_policy: "Политика Конфиденциальности",
                form_note_terms_of_service: "Условия использования",
                form_note_user_agreement: "Пользовательское соглашение",
                // Футер ключи
                logo: 'DIVO',
                'footer-mission': 'Ликвидируем разрыв между красивыми AI-демо и работающими enterprise-системами, которые приносят измеримую прибыль.',
                'footer-solutions-title': 'Решения',
                'footer-company-title': 'Компания',
                'footer-portfolio': 'Портфолио и Кейсы',
                'footer-contact-title': 'Контакты',
                'footer-legal-title': 'Документы',
                'footer-privacy': 'Политика конфиденциальности',
                'footer-user-agreement': 'Пользовательское соглашение',
                'nav-sales': 'Для Продаж',
                'nav-design': 'Для Дизайна',
                'nav-custom-dev': 'Кастомная разработка',
            }
        }
    };

    let currentLang = 'en';

    document.addEventListener('DOMContentLoaded', () => {

        // --- Логика для мобильного меню (из кастом.html) ---
        const mobileMenuToggle = document.getElementById('mobile-menu-toggle');
        const mobileMenu = document.getElementById('mobile-menu');
        if (mobileMenuToggle && mobileMenu) {
            mobileMenuToggle.addEventListener('click', () => {
                mobileMenu.classList.toggle('hidden');
                const isExpanded = !mobileMenu.classList.contains('hidden');
                mobileMenuToggle.setAttribute('aria-expanded', isExpanded);
            });
        }

        // --- Логика перевода (из index.html) ---

        // Render features
        function renderFeatures() {
            const featuresList = document.getElementById('featuresList');
            if (!featuresList) return;
            featuresList.innerHTML = data.features.map((feature, index) => `
                <li class="flex items-start gap-4 p-4 bg-white rounded-lg border border-gray-200 shadow-sm">
                    <span class="flex-shrink-0 w-6 h-6 bg-primary/10 text-primary rounded-full flex items-center justify-center font-bold" style="background-color: var(--color-bg-1); color: var(--color-primary);">✓</span>
                    <span class="feature-text text-text-secondary">${feature[currentLang]}</span>
                </li>
            `).join('');
        }

        // Render timeline
        function renderTimeline() {
            const timeline = document.getElementById('timeline');
            if (!timeline) return;
            timeline.innerHTML = data.timeline.map((item, index) => `
                <div class="timeline-item p-4 bg-white rounded-lg border border-gray-200 shadow-sm">
                    <div class="font-bold" style="color: var(--color-primary);">${item[currentLang].period}</div>
                    <div class="timeline-title text-text-secondary">${item[currentLang].title}</div>
                </div>
            `).join('');
        }

        // Update all translations
        function updateTranslations() {
            // Устанавливаем язык на <html>
            document.documentElement.lang = currentLang;

            const elements = document.querySelectorAll('[data-lang-key]');
            elements.forEach(el => {
                const key = el.getAttribute('data-lang-key');
                if (data.translations[currentLang][key]) {
                    el.textContent = data.translations[currentLang][key];
                }
            });

            // Обновляем также элементы с data-lang (из шапки/подвала)
            const elementsHeader = document.querySelectorAll('[data-lang]');
            elementsHeader.forEach(el => {
                const key = el.getAttribute('data-lang');
                 if (data.translations[currentLang][key]) {
                    el.innerHTML = data.translations[currentLang][key];
                }
            });

            renderFeatures();
            renderTimeline();
        }

        // --- Новая логика переключения языка (для шапки из кастом.html) ---
        const btnRuDesktop = document.getElementById('btn-ru');
        const btnEnDesktop = document.getElementById('btn-en');
        const btnRuMobile = document.getElementById('btn-ru-mobile');
        const btnEnMobile = document.getElementById('btn-en-mobile');

        function setLang(lang) {
            currentLang = lang;
            const isRu = lang === 'ru';

            // Update button active states
            btnRuDesktop.classList.toggle('active', isRu);
            btnEnDesktop.classList.toggle('active', !isRu);
            btnRuMobile.classList.toggle('active', isRu);
            btnEnMobile.classList.toggle('active', !isRu);

            // Update translations
            updateTranslations();
        }

        // Add listeners
        btnRuDesktop.addEventListener('click', () => setLang('ru'));
        btnEnDesktop.addEventListener('click', () => setLang('en'));
        btnRuMobile.addEventListener('click', () => setLang('ru'));
        btnEnMobile.addEventListener('click', () => setLang('en'));

        // Back button
        document.getElementById('backBtn').addEventListener('click', () => {
            window.history.back();
        });

        // --- Логика формы (из index.html) ---
        const form = document.getElementById('paymentForm');
        const submitBtn = document.getElementById('submitBtn');
        const messageContainer = document.getElementById('messageContainer');

        function showMessage(text, type) {
            messageContainer.innerHTML = `<div class="message ${type} show">${text}</div>`;
            setTimeout(() => {
                const msg = messageContainer.querySelector('.message');
                if (msg) msg.classList.remove('show');
            }, 5000);
        }

        // --- Обновленная логика для мобильного виджета (из index.html) ---
        const widgetToggle = document.getElementById('widgetToggle');
        const paymentWidget = document.querySelector('.payment-widget');

        if (widgetToggle) {
            widgetToggle.addEventListener('click', () => {
                paymentWidget.classList.toggle('open');
            });
        }

        // --- Инициализация при загрузке ---
        setLang(currentLang); // Устанавливаем 'ru' и переводим
    });
</script>
</body>
</html>